\documentclass[10pt]{article}
\usepackage{graphicx} % Required for inserting images
\usepackage{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{physics}

\geometry{
    a4paper,
    left=20mm,
    right=20mm,
    top=20mm,
    bottom=20mm
}

% commands
\newcommand{\deq}{\vcentcolon=}
\newcommand{\idd}{\text{Ä‘}}
\newcommand{\nimplies}{\centernot\implies}
\newcommand{\vc}[1]{\boldsymbol{#1}}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\newcommand{\mat}[1]{\mathbf{#1}}
\newcommand{\hess}[1]{\vc{\nabla}^2 f(\vc{#1})}

\title{industrial p02 notes}
\author{cs}

\begin{document}

\maketitle

\section{Implementation Summary}

The provided notebook implements a spatial agent-based simulation on a
$100\times100$ lattice representing the topology of Edinburgh. The map incorporates
hard-coded geographic features, including parks (e.g., The Meadows), roads, and
fixed amenities (schools, gyms, shops). Agents are initialized with income levels
(derived from Scottish Index of Multiple Deprivation data) and heterogeneous
attributes including religion, language, and age category.

The simulation evolves through two coupled dynamic processes:

\begin{enumerate}
    \item \textbf{Price Evolution:} Housing prices $V$ at location $\mathbf{x}$
    are updated iteratively based on occupant income $A$ and the average price
    of the Moore neighborhood $\mathcal{N}(\mathbf{x})$:
    $$ V^{t+1}(\mathbf{x}) = V^t(\mathbf{x}) + A^t(\mathbf{x}) + \lambda
    \frac{\sum_{\mathbf{y}\in\mathcal{N}(\mathbf{x})}
    V^t(\mathbf{y})}{\#\mathcal{N}(\mathbf{x})} $$

    \item \textbf{Agent Mobility:} Unlike the vacancy-based model described in
    the text, the code utilizes pairwise swapping (Kawasaki dynamics). Two
    randomly selected grid cells $\mathbf{x}$ and $\mathbf{y}$ exchange
    occupants if the swap yields a positive net change in utility ($\Delta > 0$).
    The utility function balances economic affordability with social amenities:
    $$ \Delta = \Delta_{\text{money}} + \Delta_{\text{amenities}} $$
    where $\Delta_{\text{money}}$ minimizes the squared difference between
    household income and property price, and $\Delta_{\text{amenities}}$
    maximizes cultural similarity with neighbors (Schelling mechanism) and
    proximity to preferred facilities.
\end{enumerate}

\section{Entropy implementation}
To quantify segregation, we measure how ``mixed'' each neighbourhood is.
Let $i$ index a habitable cell, and let $N(i)$ be a square window of radius
$r$ around $i$.  Within this window, we compute the local proportions of the
two groups $g\in\{0,1\}$:
\[
p_{i,g}=\frac{\#\{j\in N(i):\text{group}(j)=g\}}{\#N(i)}.
\]
If a neighbourhood is fully mixed, these proportions are close to $1/2$; if
it is segregated, one of them is close to $1$ and the other close to $0$.

To convert these proportions into a single measure of ``local disorder'', we
use the Shannon entropy:
\[
H_i=-\sum_{g}p_{i,g}\,\ln p_{i,g}, \qquad 0\ln 0:=0.
\]
Entropy is maximised when both groups are equally present, and minimised
when one group dominates.  For two groups, the maximum entropy is $\ln 2$,
so we define a normalised entropy:
\[
\tilde H_i=\frac{H_i}{\ln 2}\in[0,1].
\]
Here $\tilde H_i\approx 1$ means a well-mixed neighbourhood, while
$\tilde H_i\approx 0$ indicates homogeneity.

To obtain a city-wide measure, we average $\tilde H_i$ over all habitable
cells $\mathcal H$:
\[
\tilde H_{\text{mean}}=\frac{1}{|\mathcal H|}\sum_{i\in\mathcal H}\tilde H_i.
\]
Finally, because segregation corresponds to *low* entropy, we define the
segregation index
\[
S=1-\tilde H_{\text{mean}}, \qquad S\in[0,1].
\]
Thus $S=0$ denotes a perfectly mixed configuration, while $S=1$ denotes a
perfectly segregated configuration.

\end{document}
